
# SimpleApp Buildroot Package

This guide explains how to create a simple custom package named `simpleapp` and integrate it into a Buildroot-generated Root Filesystem (Root FS). The `simpleapp` package includes a simple C program that prints "Hi People" to the console.

## Directory Structure

First, create the necessary directory structure for your package:
`mkdir -p ./package/simpleapp/src` 

## Creating the Source File

Create and edit the source file for `simpleapp`:

`touch ./package/simpleapp/src/simpleapp.c
vim ./package/simpleapp/src/simpleapp.c` 

Inside `simpleapp.c`, add the following code:


	#include <stdio.h>

	int main(void) {
	    printf("Hi People\r\n");
	    return 0;
	}

### Verifying Source File Creation

After creating the source file, you should have the following structure:

`ls ./package/simpleapp/src` 

![Screenshot from 2024-08-07 01-40-29](https://github.com/user-attachments/assets/3dd388a4-95bd-49ee-9e3f-b3a0395c8dad)


## Creating the Makefile for the Application

Create and edit the `Makefile` in the `src` directory:


`touch ./package/simpleapp/src/Makefile
vim ./package/simpleapp/src/Makefile` 

Add the following content to the `Makefile`:

	.PHONY: clean
	.PHONY: simpleapp

	simpleapp: simpleapp.c
	    $(CC) -g -Wall $(CFLAGS) $(LDFLAGS) $< -o $@

	clean:
    -rm simpleapp 

**Note:** Ensure you use a tab character for indentation in the `Makefile`.

### Verifying Makefile Creation

After creating the Makefile, you should have the following structure:


`ls ./package/simpleapp` 

![Screenshot from 2024-08-07 01-40-12](https://github.com/user-attachments/assets/569cd029-c1b3-416d-858e-e6ed7b8523cc)


## Creating the Buildroot Package Makefile

Create and edit the package definition file for Buildroot:

`touch ./package/simpleapp/simpleapp.mk
vim ./package/simpleapp/simpleapp.mk` 

Add the following content to `simpleapp.mk`:


	SIMPLEAPP_VERSION = 1.0
	SIMPLEAPP_SITE = package/simpleapp/src
	SIMPLEAPP_SITE_METHOD = local

	define SIMPLEAPP_BUILD_CMDS
	    $(MAKE) CC="$(TARGET_CC)" LD="$(TARGET_LD)" -C $(@D)
	endef

	define SIMPLEAPP_INSTALL_TARGET_CMDS
	    $(INSTALL) -D -m 0755 $(@D)/simpleapp 
	    $(TARGET_DIR)/usr/bin
	endef

	$(eval $(generic-package))` 

## Creating the Buildroot Config.in File for the Package

Create and edit the configuration file to make the package visible in Buildroot's `menuconfig`:


`touch ./package/simpleapp/Config.in
vim ./package/simpleapp/Config.in` 

Add the following content to `Config.in`:

`config BR2_PACKAGE_SIMPLEAPP
    bool "simpleapp"
    help
        simpleapp package.` 

## Integrating the Package Config.in into Buildroot

Edit the main `Config.in` file for packages to include your new package:



`vim ./package/Config.in` 

Add a new menu entry for your package:


`menu "SIMPLEAPP Packages"
    source "package/simpleapp/Config.in"
endmenu` 

## Enabling the Package in Buildroot Menuconfig

**Configure Buildroot to include your package:**


`cd buildroot
make menuconfig` 

-   Navigate to `Target packages`.
-   Find the `SIMPLEAPP Packages` menu.
-   Select and enable the `simpleapp` package.
![Screenshot from 2024-08-07 01-37-01](https://github.com/user-attachments/assets/04b754fa-423a-4443-a8a4-c194eb6aa51a)



## Building the Root Filesystem with Buildroot

`make -j8` 

After the build process completes, the executable for `simpleapp` will be included in the Root Filesystem under `/usr/bin`.

## Summary

By following these steps, you create a new package directory structure, write a simple C program, create a `Makefile` for the application, define the Buildroot package in a `simpleapp.mk` file, configure Buildroot to recognize the package via `Config.in`, and integrate it into the build process. This ensures that `simpleapp` will be compiled and included in the final Root Filesystem generated by Buildroot.
